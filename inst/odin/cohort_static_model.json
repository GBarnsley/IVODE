{"version":"1.5.9","config":{"base":"cohort_static_model","include":null,"custom":null},"meta":{"internal":"internal","user":"user","state":"state","result":"dstatedt","output":"output","time":"t","initial_time":"initial_t"},"features":{"continuous":true,"discrete":false,"mixed":false,"has_array":true,"has_output":false,"has_user":true,"has_delay":false,"has_interpolate":true,"has_stochastic":false,"has_data":false,"has_compare":false,"has_include":false,"has_debug":false,"has_derivative":false,"initial_time_dependent":false},"data":{"elements":[{"name":"adjust_for_crude_foi","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"births_deaths_M","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_births_deaths_M","dim":[],"mult":[]},"stage":"time"},{"name":"births_deaths_R","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_births_deaths_R","dim":[],"mult":[]},"stage":"time"},{"name":"births_deaths_S","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_births_deaths_S","dim":[],"mult":[]},"stage":"time"},{"name":"births_deaths_V","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_births_deaths_V","dim":[],"mult":[]},"stage":"time"},{"name":"births_deaths_VD","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_births_deaths_VD","dim":[],"mult":[]},"stage":"time"},{"name":"births_M","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"births_S","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"births_total","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"child_bearing","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_child_bearing","dim":[],"mult":[]},"stage":"user"},{"name":"crude_birth_rate","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_crude_birth_rate","dim":[],"mult":[]},"stage":"user"},{"name":"crude_death_rate","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_crude_death_rate","dim":[],"mult":[]},"stage":"user"},{"name":"crude_foi","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_crude_foi","dim":[],"mult":[]},"stage":"user"},{"name":"dim_births_deaths_M","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_births_deaths_R","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_births_deaths_S","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_births_deaths_V","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_births_deaths_VD","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_child_bearing","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_crude_birth_rate","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_crude_death_rate","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_crude_foi","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_gains_immunity","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_infections_S","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_infections_VD","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_loses_immunity","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_M","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_M_0","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_prop_death","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_R","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_R_0","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_S","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_S_0","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_susceptible_child_bearing","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_susceptible_pop","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_t_death_rate","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_total_child_bearing","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_total_pop","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_tt_crude_birth_rate","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"null"},{"name":"dim_tt_crude_death_rate","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"null"},{"name":"dim_tt_crude_foi","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"null"},{"name":"dim_V","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_V_0","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_VD","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_VD_0","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_waning_R","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_waning_V","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_waning_VD","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_weighted_totals","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"gains_immunity","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_gains_immunity","dim":[],"mult":[]},"stage":"time"},{"name":"infections_S","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_infections_S","dim":[],"mult":[]},"stage":"time"},{"name":"infections_VD","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_infections_VD","dim":[],"mult":[]},"stage":"time"},{"name":"initial_M","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_M","dim":[],"mult":[]},"stage":"user"},{"name":"initial_R","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_R","dim":[],"mult":[]},"stage":"user"},{"name":"initial_S","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_S","dim":[],"mult":[]},"stage":"user"},{"name":"initial_V","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_V","dim":[],"mult":[]},"stage":"user"},{"name":"initial_VD","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_VD","dim":[],"mult":[]},"stage":"user"},{"name":"interpolate_t_crude_birth_rate","location":"internal","storage_type":"interpolate_data","rank":0,"dimnames":null,"stage":"user"},{"name":"interpolate_t_crude_death_rate","location":"internal","storage_type":"interpolate_data","rank":0,"dimnames":null,"stage":"user"},{"name":"interpolate_t_crude_foi","location":"internal","storage_type":"interpolate_data","rank":0,"dimnames":null,"stage":"user"},{"name":"loses_immunity","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_loses_immunity","dim":[],"mult":[]},"stage":"time"},{"name":"M","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_M","dim":[],"mult":[]},"stage":"time"},{"name":"M_0","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_M_0","dim":[],"mult":[]},"stage":"user"},{"name":"n_age","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"n_maternal","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"offset_variable_M","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"offset_variable_V","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"offset_variable_VD","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"prop_death","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_prop_death","dim":[],"mult":[]},"stage":"user"},{"name":"R","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_R","dim":[],"mult":[]},"stage":"time"},{"name":"R_0","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_R_0","dim":[],"mult":[]},"stage":"user"},{"name":"S","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_S","dim":[],"mult":[]},"stage":"time"},{"name":"S_0","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_S_0","dim":[],"mult":[]},"stage":"user"},{"name":"susceptible_child_bearing","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_susceptible_child_bearing","dim":[],"mult":[]},"stage":"time"},{"name":"susceptible_pop","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_susceptible_pop","dim":[],"mult":[]},"stage":"time"},{"name":"t_adjusted_foi","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"t_crude_birth_rate","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"t_crude_death_rate","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"t_crude_foi","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"t_death_rate","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_t_death_rate","dim":[],"mult":[]},"stage":"time"},{"name":"total_child_bearing","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_total_child_bearing","dim":[],"mult":[]},"stage":"time"},{"name":"total_pop","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_total_pop","dim":[],"mult":[]},"stage":"time"},{"name":"tt_crude_birth_rate","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_tt_crude_birth_rate","dim":[],"mult":[]},"stage":"user"},{"name":"tt_crude_death_rate","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_tt_crude_death_rate","dim":[],"mult":[]},"stage":"user"},{"name":"tt_crude_foi","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_tt_crude_foi","dim":[],"mult":[]},"stage":"user"},{"name":"V","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_V","dim":[],"mult":[]},"stage":"time"},{"name":"V_0","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_V_0","dim":[],"mult":[]},"stage":"user"},{"name":"VD","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_VD","dim":[],"mult":[]},"stage":"time"},{"name":"VD_0","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_VD_0","dim":[],"mult":[]},"stage":"user"},{"name":"waning","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"waning_R","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_waning_R","dim":[],"mult":[]},"stage":"time"},{"name":"waning_V","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_waning_V","dim":[],"mult":[]},"stage":"time"},{"name":"waning_VD","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_waning_VD","dim":[],"mult":[]},"stage":"time"},{"name":"weighted_totals","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_weighted_totals","dim":[],"mult":[]},"stage":"time"}],"variable":{"length":["+",["+",["+",["+","dim_M","dim_R"],"dim_S"],"dim_V"],"dim_VD"],"contents":[{"name":"S","offset":0,"initial":"initial_S"},{"name":"R","offset":"dim_S","initial":"initial_R"},{"name":"V","offset":"offset_variable_V","initial":"initial_V"},{"name":"VD","offset":"offset_variable_VD","initial":"initial_VD"},{"name":"M","offset":"offset_variable_M","initial":"initial_M"}]},"output":{"length":0,"contents":[]}},"equations":[{"name":"adjust_for_crude_foi","type":"user","source":[35],"depends":null,"lhs":"adjust_for_crude_foi","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"alloc_births_deaths_M","type":"alloc","source":[97],"depends":{"functions":[],"variables":["dim_births_deaths_M"]},"lhs":"births_deaths_M"},{"name":"alloc_births_deaths_R","type":"alloc","source":[87],"depends":{"functions":[],"variables":["dim_births_deaths_R"]},"lhs":"births_deaths_R"},{"name":"alloc_births_deaths_S","type":"alloc","source":[84],"depends":{"functions":[],"variables":["dim_births_deaths_S"]},"lhs":"births_deaths_S"},{"name":"alloc_births_deaths_V","type":"alloc","source":[90],"depends":{"functions":[],"variables":["dim_births_deaths_V"]},"lhs":"births_deaths_V"},{"name":"alloc_births_deaths_VD","type":"alloc","source":[93],"depends":{"functions":[],"variables":["dim_births_deaths_VD"]},"lhs":"births_deaths_VD"},{"name":"alloc_gains_immunity","type":"alloc","source":[124],"depends":{"functions":[],"variables":["dim_gains_immunity"]},"lhs":"gains_immunity"},{"name":"alloc_infections_S","type":"alloc","source":[118],"depends":{"functions":[],"variables":["dim_infections_S"]},"lhs":"infections_S"},{"name":"alloc_infections_VD","type":"alloc","source":[121],"depends":{"functions":[],"variables":["dim_infections_VD"]},"lhs":"infections_VD"},{"name":"alloc_initial_M","type":"alloc","source":[145],"depends":{"functions":[],"variables":["dim_M"]},"lhs":"initial_M"},{"name":"alloc_initial_R","type":"alloc","source":[133],"depends":{"functions":[],"variables":["dim_R"]},"lhs":"initial_R"},{"name":"alloc_initial_S","type":"alloc","source":[129],"depends":{"functions":[],"variables":["dim_S"]},"lhs":"initial_S"},{"name":"alloc_initial_V","type":"alloc","source":[137],"depends":{"functions":[],"variables":["dim_V"]},"lhs":"initial_V"},{"name":"alloc_initial_VD","type":"alloc","source":[141],"depends":{"functions":[],"variables":["dim_VD"]},"lhs":"initial_VD"},{"name":"alloc_loses_immunity","type":"alloc","source":[110],"depends":{"functions":[],"variables":["dim_loses_immunity"]},"lhs":"loses_immunity"},{"name":"alloc_susceptible_child_bearing","type":"alloc","source":[67],"depends":{"functions":[],"variables":["dim_susceptible_child_bearing"]},"lhs":"susceptible_child_bearing"},{"name":"alloc_susceptible_pop","type":"alloc","source":[64],"depends":{"functions":[],"variables":["dim_susceptible_pop"]},"lhs":"susceptible_pop"},{"name":"alloc_t_death_rate","type":"alloc","source":[80],"depends":{"functions":[],"variables":["dim_t_death_rate"]},"lhs":"t_death_rate"},{"name":"alloc_total_child_bearing","type":"alloc","source":[61],"depends":{"functions":[],"variables":["dim_total_child_bearing"]},"lhs":"total_child_bearing"},{"name":"alloc_total_pop","type":"alloc","source":[58],"depends":{"functions":[],"variables":["dim_total_pop"]},"lhs":"total_pop"},{"name":"alloc_waning_R","type":"alloc","source":[101],"depends":{"functions":[],"variables":["dim_waning_R"]},"lhs":"waning_R"},{"name":"alloc_waning_V","type":"alloc","source":[104],"depends":{"functions":[],"variables":["dim_waning_V"]},"lhs":"waning_V"},{"name":"alloc_waning_VD","type":"alloc","source":[107],"depends":{"functions":[],"variables":["dim_waning_VD"]},"lhs":"waning_VD"},{"name":"alloc_weighted_totals","type":"alloc","source":[77],"depends":{"functions":[],"variables":["dim_weighted_totals"]},"lhs":"weighted_totals"},{"name":"births_deaths_M","type":"expression_array","source":[95,96],"depends":{"functions":["-","*","["],"variables":["dim_births_deaths_M","births_M","t_death_rate","i","M","n_maternal","alloc_births_deaths_M"]},"lhs":"births_deaths_M","rhs":[{"index":[{"value":1,"is_range":false,"index":"i"}],"value":["-","births_M",["*",["[","t_death_rate","i"],["[","M","i"]]]},{"index":[{"value":[":",2,"n_maternal"],"is_range":true,"index":"i"}],"value":["*",["-",["[","t_death_rate","i"]],["[","M","i"]]}]},{"name":"births_deaths_R","type":"expression_array","source":[86],"depends":{"functions":["length","*","-","["],"variables":["dim_births_deaths_R","t_death_rate","i","R","alloc_births_deaths_R"]},"lhs":"births_deaths_R","rhs":[{"index":[{"value":[":",1,["length","births_deaths_R"]],"is_range":true,"index":"i"}],"value":["*",["-",["[","t_death_rate","i"]],["[","R","i"]]}]},{"name":"births_deaths_S","type":"expression_array","source":[82,83],"depends":{"functions":["-","*","["],"variables":["dim_births_deaths_S","births_S","t_death_rate","i","S","n_age","alloc_births_deaths_S"]},"lhs":"births_deaths_S","rhs":[{"index":[{"value":1,"is_range":false,"index":"i"}],"value":["-","births_S",["*",["[","t_death_rate","i"],["[","S","i"]]]},{"index":[{"value":[":",2,"n_age"],"is_range":true,"index":"i"}],"value":["*",["-",["[","t_death_rate","i"]],["[","S","i"]]}]},{"name":"births_deaths_V","type":"expression_array","source":[89],"depends":{"functions":["length","*","-","["],"variables":["dim_births_deaths_V","t_death_rate","i","V","alloc_births_deaths_V"]},"lhs":"births_deaths_V","rhs":[{"index":[{"value":[":",1,["length","births_deaths_V"]],"is_range":true,"index":"i"}],"value":["*",["-",["[","t_death_rate","i"]],["[","V","i"]]}]},{"name":"births_deaths_VD","type":"expression_array","source":[92],"depends":{"functions":["length","*","-","["],"variables":["dim_births_deaths_VD","t_death_rate","i","VD","alloc_births_deaths_VD"]},"lhs":"births_deaths_VD","rhs":[{"index":[{"value":[":",1,["length","births_deaths_VD"]],"is_range":true,"index":"i"}],"value":["*",["-",["[","t_death_rate","i"]],["[","VD","i"]]}]},{"name":"births_M","type":"expression_scalar","source":[73],"depends":{"functions":["-"],"variables":["births_total","births_S"]},"lhs":"births_M","rhs":{"value":["-","births_total","births_S"]}},{"name":"births_S","type":"expression_scalar","source":[71],"depends":{"functions":["*","(","/","odin_sum","length"],"variables":["births_total","susceptible_child_bearing","dim_susceptible_child_bearing","total_child_bearing","dim_total_child_bearing"]},"lhs":"births_S","rhs":{"value":["*","births_total",["(",["/",["odin_sum","susceptible_child_bearing",1,["length","susceptible_child_bearing"]],["odin_sum","total_child_bearing",1,["length","total_child_bearing"]]]]]}},{"name":"births_total","type":"expression_scalar","source":[69],"depends":{"functions":["*","(","odin_sum","length"],"variables":["total_pop","dim_total_pop","t_crude_birth_rate"]},"lhs":"births_total","rhs":{"value":["*",["(",["odin_sum","total_pop",1,["length","total_pop"]]],"t_crude_birth_rate"]}},{"name":"child_bearing","type":"user","source":[5],"depends":{"functions":["length"],"variables":["dim_child_bearing"]},"lhs":"child_bearing","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"crude_birth_rate","type":"user","source":[22],"depends":{"functions":["length"],"variables":["dim_crude_birth_rate"]},"lhs":"crude_birth_rate","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"crude_death_rate","type":"user","source":[11],"depends":{"functions":["length"],"variables":["dim_crude_death_rate"]},"lhs":"crude_death_rate","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"crude_foi","type":"user","source":[32],"depends":{"functions":["length"],"variables":["dim_crude_foi"]},"lhs":"crude_foi","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"deriv_M","type":"expression_array","source":[147],"depends":{"functions":["length","["],"variables":["dim_M","births_deaths_M","i"]},"lhs":"M","rhs":[{"index":[{"value":[":",1,["length","M"]],"is_range":true,"index":"i"}],"value":["[","births_deaths_M","i"]}]},{"name":"deriv_R","type":"expression_array","source":[135],"depends":{"functions":["length","-","+","["],"variables":["dim_R","births_deaths_R","i","gains_immunity","waning_R"]},"lhs":"R","rhs":[{"index":[{"value":[":",1,["length","R"]],"is_range":true,"index":"i"}],"value":["-",["+",["[","births_deaths_R","i"],["[","gains_immunity","i"]],["[","waning_R","i"]]}]},{"name":"deriv_S","type":"expression_array","source":[131],"depends":{"functions":["length","-","+","["],"variables":["dim_S","births_deaths_S","i","loses_immunity","infections_S"]},"lhs":"S","rhs":[{"index":[{"value":[":",1,["length","S"]],"is_range":true,"index":"i"}],"value":["-",["+",["[","births_deaths_S","i"],["[","loses_immunity","i"]],["[","infections_S","i"]]}]},{"name":"deriv_V","type":"expression_array","source":[139],"depends":{"functions":["length","-","["],"variables":["dim_V","births_deaths_V","i","waning_V"]},"lhs":"V","rhs":[{"index":[{"value":[":",1,["length","V"]],"is_range":true,"index":"i"}],"value":["-",["[","births_deaths_V","i"],["[","waning_V","i"]]}]},{"name":"deriv_VD","type":"expression_array","source":[143],"depends":{"functions":["length","-","["],"variables":["dim_VD","births_deaths_VD","i","waning_VD","infections_VD"]},"lhs":"VD","rhs":[{"index":[{"value":[":",1,["length","VD"]],"is_range":true,"index":"i"}],"value":["-",["-",["[","births_deaths_VD","i"],["[","waning_VD","i"]],["[","infections_VD","i"]]}]},{"name":"dim_births_deaths_M","type":"expression_scalar","source":[97],"depends":{"functions":[],"variables":["n_maternal"]},"lhs":"dim_births_deaths_M","rhs":{"value":"n_maternal"}},{"name":"dim_births_deaths_R","type":"expression_scalar","source":[87],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_births_deaths_R","rhs":{"value":"n_age"}},{"name":"dim_births_deaths_S","type":"expression_scalar","source":[84],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_births_deaths_S","rhs":{"value":"n_age"}},{"name":"dim_births_deaths_V","type":"expression_scalar","source":[90],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_births_deaths_V","rhs":{"value":"n_age"}},{"name":"dim_births_deaths_VD","type":"expression_scalar","source":[93],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_births_deaths_VD","rhs":{"value":"n_age"}},{"name":"dim_child_bearing","type":"expression_scalar","source":[6],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_child_bearing","rhs":{"value":"n_age"}},{"name":"dim_crude_birth_rate","type":"expression_scalar","source":[23],"depends":{"functions":["length"],"variables":["dim_tt_crude_birth_rate"]},"lhs":"dim_crude_birth_rate","rhs":{"value":["length","tt_crude_birth_rate"]}},{"name":"dim_crude_death_rate","type":"expression_scalar","source":[12],"depends":{"functions":["length"],"variables":["dim_tt_crude_death_rate"]},"lhs":"dim_crude_death_rate","rhs":{"value":["length","tt_crude_death_rate"]}},{"name":"dim_crude_foi","type":"expression_scalar","source":[33],"depends":{"functions":["length"],"variables":["dim_tt_crude_foi"]},"lhs":"dim_crude_foi","rhs":{"value":["length","tt_crude_foi"]}},{"name":"dim_gains_immunity","type":"expression_scalar","source":[124],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_gains_immunity","rhs":{"value":"n_age"}},{"name":"dim_infections_S","type":"expression_scalar","source":[118],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_infections_S","rhs":{"value":"n_age"}},{"name":"dim_infections_VD","type":"expression_scalar","source":[121],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_infections_VD","rhs":{"value":"n_age"}},{"name":"dim_loses_immunity","type":"expression_scalar","source":[110],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_loses_immunity","rhs":{"value":"n_age"}},{"name":"dim_M","type":"expression_scalar","source":[145],"depends":{"functions":[],"variables":["n_maternal"]},"lhs":"dim_M","rhs":{"value":"n_maternal"}},{"name":"dim_M_0","type":"expression_scalar","source":[40],"depends":{"functions":[],"variables":["n_maternal"]},"lhs":"dim_M_0","rhs":{"value":"n_maternal"}},{"name":"dim_prop_death","type":"expression_scalar","source":[17],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_prop_death","rhs":{"value":"n_age"}},{"name":"dim_R","type":"expression_scalar","source":[133],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_R","rhs":{"value":"n_age"}},{"name":"dim_R_0","type":"expression_scalar","source":[46],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_R_0","rhs":{"value":"n_age"}},{"name":"dim_S","type":"expression_scalar","source":[129],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_S","rhs":{"value":"n_age"}},{"name":"dim_S_0","type":"expression_scalar","source":[43],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_S_0","rhs":{"value":"n_age"}},{"name":"dim_susceptible_child_bearing","type":"expression_scalar","source":[67],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_susceptible_child_bearing","rhs":{"value":"n_age"}},{"name":"dim_susceptible_pop","type":"expression_scalar","source":[64],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_susceptible_pop","rhs":{"value":"n_age"}},{"name":"dim_t_death_rate","type":"expression_scalar","source":[80],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_t_death_rate","rhs":{"value":"n_age"}},{"name":"dim_total_child_bearing","type":"expression_scalar","source":[61],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_total_child_bearing","rhs":{"value":"n_age"}},{"name":"dim_total_pop","type":"expression_scalar","source":[58],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_total_pop","rhs":{"value":"n_age"}},{"name":"dim_V","type":"expression_scalar","source":[137],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_V","rhs":{"value":"n_age"}},{"name":"dim_V_0","type":"expression_scalar","source":[49],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_V_0","rhs":{"value":"n_age"}},{"name":"dim_VD","type":"expression_scalar","source":[141],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_VD","rhs":{"value":"n_age"}},{"name":"dim_VD_0","type":"expression_scalar","source":[52],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_VD_0","rhs":{"value":"n_age"}},{"name":"dim_waning_R","type":"expression_scalar","source":[101],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_waning_R","rhs":{"value":"n_age"}},{"name":"dim_waning_V","type":"expression_scalar","source":[104],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_waning_V","rhs":{"value":"n_age"}},{"name":"dim_waning_VD","type":"expression_scalar","source":[107],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_waning_VD","rhs":{"value":"n_age"}},{"name":"dim_weighted_totals","type":"expression_scalar","source":[77],"depends":{"functions":[],"variables":["n_age"]},"lhs":"dim_weighted_totals","rhs":{"value":"n_age"}},{"name":"gains_immunity","type":"expression_array","source":[123],"depends":{"functions":["length","+","["],"variables":["dim_gains_immunity","infections_S","i","infections_VD","alloc_gains_immunity"]},"lhs":"gains_immunity","rhs":[{"index":[{"value":[":",1,["length","gains_immunity"]],"is_range":true,"index":"i"}],"value":["+",["[","infections_S","i"],["[","infections_VD","i"]]}]},{"name":"infections_S","type":"expression_array","source":[117],"depends":{"functions":["length","*","["],"variables":["dim_infections_S","t_adjusted_foi","S","i","alloc_infections_S"]},"lhs":"infections_S","rhs":[{"index":[{"value":[":",1,["length","infections_S"]],"is_range":true,"index":"i"}],"value":["*","t_adjusted_foi",["[","S","i"]]}]},{"name":"infections_VD","type":"expression_array","source":[120],"depends":{"functions":["length","*","["],"variables":["dim_infections_VD","t_adjusted_foi","VD","i","alloc_infections_VD"]},"lhs":"infections_VD","rhs":[{"index":[{"value":[":",1,["length","infections_VD"]],"is_range":true,"index":"i"}],"value":["*","t_adjusted_foi",["[","VD","i"]]}]},{"name":"initial_M","type":"expression_array","source":[146],"depends":{"functions":["length","["],"variables":["dim_M","M_0","i"]},"lhs":"initial_M","rhs":[{"index":[{"value":[":",1,["length","M"]],"is_range":true,"index":"i"}],"value":["[","M_0","i"]}]},{"name":"initial_R","type":"expression_array","source":[134],"depends":{"functions":["length","["],"variables":["dim_R","R_0","i"]},"lhs":"initial_R","rhs":[{"index":[{"value":[":",1,["length","R"]],"is_range":true,"index":"i"}],"value":["[","R_0","i"]}]},{"name":"initial_S","type":"expression_array","source":[130],"depends":{"functions":["length","["],"variables":["dim_S","S_0","i"]},"lhs":"initial_S","rhs":[{"index":[{"value":[":",1,["length","S"]],"is_range":true,"index":"i"}],"value":["[","S_0","i"]}]},{"name":"initial_V","type":"expression_array","source":[138],"depends":{"functions":["length","["],"variables":["dim_V","V_0","i"]},"lhs":"initial_V","rhs":[{"index":[{"value":[":",1,["length","V"]],"is_range":true,"index":"i"}],"value":["[","V_0","i"]}]},{"name":"initial_VD","type":"expression_array","source":[142],"depends":{"functions":["length","["],"variables":["dim_VD","VD_0","i"]},"lhs":"initial_VD","rhs":[{"index":[{"value":[":",1,["length","VD"]],"is_range":true,"index":"i"}],"value":["[","VD_0","i"]}]},{"name":"interpolate_t_crude_birth_rate","type":"alloc_interpolate","source":[25],"depends":{"functions":[],"variables":["tt_crude_birth_rate","crude_birth_rate"]},"lhs":"interpolate_t_crude_birth_rate","interpolate":{"t":"tt_crude_birth_rate","y":"crude_birth_rate","type":"constant","equation":"t_crude_birth_rate"}},{"name":"interpolate_t_crude_death_rate","type":"alloc_interpolate","source":[14],"depends":{"functions":[],"variables":["tt_crude_death_rate","crude_death_rate"]},"lhs":"interpolate_t_crude_death_rate","interpolate":{"t":"tt_crude_death_rate","y":"crude_death_rate","type":"constant","equation":"t_crude_death_rate"}},{"name":"interpolate_t_crude_foi","type":"alloc_interpolate","source":[37],"depends":{"functions":[],"variables":["tt_crude_foi","crude_foi"]},"lhs":"interpolate_t_crude_foi","interpolate":{"t":"tt_crude_foi","y":"crude_foi","type":"constant","equation":"t_crude_foi"}},{"name":"loses_immunity","type":"expression_array","source":[109],"depends":{"functions":["length","+","["],"variables":["dim_loses_immunity","waning_R","i","waning_V","waning_VD","alloc_loses_immunity"]},"lhs":"loses_immunity","rhs":[{"index":[{"value":[":",1,["length","loses_immunity"]],"is_range":true,"index":"i"}],"value":["+",["+",["[","waning_R","i"],["[","waning_V","i"]],["[","waning_VD","i"]]}]},{"name":"M_0","type":"user","source":[39],"depends":{"functions":["length"],"variables":["dim_M_0"]},"lhs":"M_0","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"n_age","type":"user","source":[2],"depends":null,"lhs":"n_age","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"n_maternal","type":"user","source":[3],"depends":null,"lhs":"n_maternal","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"offset_variable_M","type":"expression_scalar","source":[],"depends":{"functions":["+"],"variables":["dim_R","dim_S","dim_V","dim_VD"]},"lhs":"offset_variable_M","rhs":{"value":["+",["+",["+","dim_R","dim_S"],"dim_V"],"dim_VD"]}},{"name":"offset_variable_V","type":"expression_scalar","source":[],"depends":{"functions":["+"],"variables":["dim_R","dim_S"]},"lhs":"offset_variable_V","rhs":{"value":["+","dim_R","dim_S"]}},{"name":"offset_variable_VD","type":"expression_scalar","source":[],"depends":{"functions":["+"],"variables":["dim_R","dim_S","dim_V"]},"lhs":"offset_variable_VD","rhs":{"value":["+",["+","dim_R","dim_S"],"dim_V"]}},{"name":"prop_death","type":"user","source":[16],"depends":{"functions":["length"],"variables":["dim_prop_death"]},"lhs":"prop_death","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"R_0","type":"user","source":[45],"depends":{"functions":["length"],"variables":["dim_R_0"]},"lhs":"R_0","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"S_0","type":"user","source":[42],"depends":{"functions":["length"],"variables":["dim_S_0"]},"lhs":"S_0","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"susceptible_child_bearing","type":"expression_array","source":[66],"depends":{"functions":["length","*","(","["],"variables":["dim_susceptible_child_bearing","susceptible_pop","i","child_bearing","alloc_susceptible_child_bearing"]},"lhs":"susceptible_child_bearing","rhs":[{"index":[{"value":[":",1,["length","susceptible_child_bearing"]],"is_range":true,"index":"i"}],"value":["*",["(",["[","susceptible_pop","i"]],["[","child_bearing","i"]]}]},{"name":"susceptible_pop","type":"expression_array","source":[63],"depends":{"functions":["length","+","["],"variables":["dim_susceptible_pop","S","i","VD","alloc_susceptible_pop"]},"lhs":"susceptible_pop","rhs":[{"index":[{"value":[":",1,["length","susceptible_pop"]],"is_range":true,"index":"i"}],"value":["+",["[","S","i"],["[","VD","i"]]}]},{"name":"t_adjusted_foi","type":"expression_scalar","source":[115],"depends":{"functions":["if","min","/","*","odin_sum","length"],"variables":["adjust_for_crude_foi","t_crude_foi","total_pop","dim_total_pop","susceptible_pop","dim_susceptible_pop"]},"lhs":"t_adjusted_foi","rhs":{"value":["if","adjust_for_crude_foi",["min",["/",["*","t_crude_foi",["odin_sum","total_pop",1,["length","total_pop"]]],["odin_sum","susceptible_pop",1,["length","susceptible_pop"]]],1],"t_crude_foi"]}},{"name":"t_crude_birth_rate","type":"interpolate","source":[25],"depends":{"functions":[],"variables":["t","interpolate_t_crude_birth_rate"]},"lhs":"t_crude_birth_rate","interpolate":"interpolate_t_crude_birth_rate"},{"name":"t_crude_death_rate","type":"interpolate","source":[14],"depends":{"functions":[],"variables":["t","interpolate_t_crude_death_rate"]},"lhs":"t_crude_death_rate","interpolate":"interpolate_t_crude_death_rate"},{"name":"t_crude_foi","type":"interpolate","source":[37],"depends":{"functions":[],"variables":["t","interpolate_t_crude_foi"]},"lhs":"t_crude_foi","interpolate":"interpolate_t_crude_foi"},{"name":"t_death_rate","type":"expression_array","source":[79],"depends":{"functions":["length","min","/","*","[","odin_sum"],"variables":["dim_t_death_rate","t_crude_death_rate","prop_death","i","total_pop","dim_total_pop","weighted_totals","dim_weighted_totals","alloc_t_death_rate"]},"lhs":"t_death_rate","rhs":[{"index":[{"value":[":",1,["length","t_death_rate"]],"is_range":true,"index":"i"}],"value":["min",["/",["*",["*","t_crude_death_rate",["[","prop_death","i"]],["odin_sum","total_pop",1,["length","total_pop"]]],["odin_sum","weighted_totals",1,["length","weighted_totals"]]],1]}]},{"name":"total_child_bearing","type":"expression_array","source":[60],"depends":{"functions":["length","*","["],"variables":["dim_total_child_bearing","total_pop","i","child_bearing","alloc_total_child_bearing"]},"lhs":"total_child_bearing","rhs":[{"index":[{"value":[":",1,["length","total_child_bearing"]],"is_range":true,"index":"i"}],"value":["*",["[","total_pop","i"],["[","child_bearing","i"]]}]},{"name":"total_pop","type":"expression_array","source":[56,57],"depends":{"functions":["+","[","("],"variables":["n_maternal","dim_total_pop","R","i","S","V","M","VD","n_age","alloc_total_pop"]},"lhs":"total_pop","rhs":[{"index":[{"value":[":",1,"n_maternal"],"is_range":true,"index":"i"}],"value":["+",["+",["+",["+",["[","R","i"],["[","S","i"]],["[","V","i"]],["[","M","i"]],["[","VD","i"]]},{"index":[{"value":[":",["(",["+","n_maternal",1]],"n_age"],"is_range":true,"index":"i"}],"value":["+",["+",["+",["[","R","i"],["[","S","i"]],["[","V","i"]],["[","VD","i"]]}]},{"name":"tt_crude_birth_rate","type":"user","source":[19],"depends":null,"lhs":"tt_crude_birth_rate","user":{"default":null,"dim":true,"min":null,"max":null}},{"name":"tt_crude_death_rate","type":"user","source":[8],"depends":null,"lhs":"tt_crude_death_rate","user":{"default":null,"dim":true,"min":null,"max":null}},{"name":"tt_crude_foi","type":"user","source":[29],"depends":null,"lhs":"tt_crude_foi","user":{"default":null,"dim":true,"min":null,"max":null}},{"name":"V_0","type":"user","source":[48],"depends":{"functions":["length"],"variables":["dim_V_0"]},"lhs":"V_0","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"VD_0","type":"user","source":[51],"depends":{"functions":["length"],"variables":["dim_VD_0"]},"lhs":"VD_0","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"waning","type":"user","source":[27],"depends":null,"lhs":"waning","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"waning_R","type":"expression_array","source":[100],"depends":{"functions":["length","*","["],"variables":["dim_waning_R","waning","R","i","alloc_waning_R"]},"lhs":"waning_R","rhs":[{"index":[{"value":[":",1,["length","waning_R"]],"is_range":true,"index":"i"}],"value":["*","waning",["[","R","i"]]}]},{"name":"waning_V","type":"expression_array","source":[103],"depends":{"functions":["length","*","["],"variables":["dim_waning_V","waning","V","i","alloc_waning_V"]},"lhs":"waning_V","rhs":[{"index":[{"value":[":",1,["length","waning_V"]],"is_range":true,"index":"i"}],"value":["*","waning",["[","V","i"]]}]},{"name":"waning_VD","type":"expression_array","source":[106],"depends":{"functions":["length","*","["],"variables":["dim_waning_VD","waning","VD","i","alloc_waning_VD"]},"lhs":"waning_VD","rhs":[{"index":[{"value":[":",1,["length","waning_VD"]],"is_range":true,"index":"i"}],"value":["*","waning",["[","VD","i"]]}]},{"name":"weighted_totals","type":"expression_array","source":[76],"depends":{"functions":["length","*","["],"variables":["dim_weighted_totals","prop_death","i","total_pop","alloc_weighted_totals"]},"lhs":"weighted_totals","rhs":[{"index":[{"value":[":",1,["length","weighted_totals"]],"is_range":true,"index":"i"}],"value":["*",["[","prop_death","i"],["[","total_pop","i"]]}]}],"debug":[],"components":{"create":{"variables":[],"equations":[]},"user":{"variables":[],"equations":["adjust_for_crude_foi","n_age","n_maternal","tt_crude_birth_rate","tt_crude_death_rate","tt_crude_foi","waning","dim_births_deaths_M","dim_births_deaths_R","dim_births_deaths_S","dim_births_deaths_V","dim_births_deaths_VD","dim_child_bearing","dim_gains_immunity","dim_infections_S","dim_infections_VD","dim_loses_immunity","dim_M","dim_M_0","dim_prop_death","dim_R","dim_R_0","dim_S","dim_S_0","dim_susceptible_child_bearing","dim_susceptible_pop","dim_t_death_rate","dim_total_child_bearing","dim_total_pop","dim_V","dim_V_0","dim_VD","dim_VD_0","dim_waning_R","dim_waning_V","dim_waning_VD","dim_weighted_totals","alloc_births_deaths_M","alloc_births_deaths_R","alloc_births_deaths_S","alloc_births_deaths_V","alloc_births_deaths_VD","alloc_gains_immunity","alloc_infections_S","alloc_infections_VD","alloc_initial_M","alloc_initial_R","alloc_initial_S","alloc_initial_V","alloc_initial_VD","alloc_loses_immunity","alloc_susceptible_child_bearing","alloc_susceptible_pop","alloc_t_death_rate","alloc_total_child_bearing","alloc_total_pop","alloc_waning_R","alloc_waning_V","alloc_waning_VD","alloc_weighted_totals","child_bearing","dim_crude_birth_rate","dim_crude_death_rate","dim_crude_foi","M_0","offset_variable_M","offset_variable_V","offset_variable_VD","prop_death","R_0","S_0","V_0","VD_0","crude_birth_rate","crude_death_rate","crude_foi","initial_M","initial_R","initial_S","initial_V","initial_VD","interpolate_t_crude_birth_rate","interpolate_t_crude_death_rate","interpolate_t_crude_foi"]},"initial":{"variables":[],"equations":[]},"rhs":{"variables":["S","R","V","VD","M"],"equations":["susceptible_pop","total_pop","waning_R","waning_V","waning_VD","loses_immunity","susceptible_child_bearing","total_child_bearing","weighted_totals","t_crude_birth_rate","t_crude_death_rate","t_crude_foi","births_total","t_adjusted_foi","t_death_rate","births_deaths_R","births_deaths_V","births_deaths_VD","births_S","infections_S","infections_VD","births_deaths_S","births_M","deriv_V","deriv_VD","gains_immunity","births_deaths_M","deriv_R","deriv_S","deriv_M"]},"update_stochastic":{"variables":[],"equations":[]},"output":{"variables":[],"equations":[]},"compare":{"variables":[],"equations":[]}},"user":[{"name":"adjust_for_crude_foi","has_default":false},{"name":"child_bearing","has_default":false},{"name":"crude_birth_rate","has_default":false},{"name":"crude_death_rate","has_default":false},{"name":"crude_foi","has_default":false},{"name":"M_0","has_default":false},{"name":"n_age","has_default":false},{"name":"n_maternal","has_default":false},{"name":"prop_death","has_default":false},{"name":"R_0","has_default":false},{"name":"S_0","has_default":false},{"name":"tt_crude_birth_rate","has_default":false},{"name":"tt_crude_death_rate","has_default":false},{"name":"tt_crude_foi","has_default":false},{"name":"V_0","has_default":false},{"name":"VD_0","has_default":false},{"name":"waning","has_default":false}],"interpolate":{"min":["tt_crude_birth_rate","tt_crude_death_rate","tt_crude_foi"],"max":[],"critical":["tt_crude_birth_rate","tt_crude_death_rate","tt_crude_foi"]},"source":["#inputs","n_age <- user()","n_maternal <- user()","","child_bearing[] <- user()","dim(child_bearing) <- n_age","","tt_crude_death_rate[] <- user()","dim(tt_crude_death_rate) <- user()","","crude_death_rate[] <- user()","dim(crude_death_rate) <- length(tt_crude_death_rate)","","t_crude_death_rate <- interpolate(tt_crude_death_rate, crude_death_rate, \"constant\")","","prop_death[] <- user()","dim(prop_death) <- n_age","","tt_crude_birth_rate[] <- user()","dim(tt_crude_birth_rate) <- user()","","crude_birth_rate[] <- user()","dim(crude_birth_rate) <- length(tt_crude_birth_rate)","","t_crude_birth_rate <- interpolate(tt_crude_birth_rate, crude_birth_rate, \"constant\")","","waning <- user()","","tt_crude_foi[] <- user()","dim(tt_crude_foi) <- user()","","crude_foi[] <- user()","dim(crude_foi) <- length(tt_crude_foi)","","adjust_for_crude_foi <- user()","","t_crude_foi <- interpolate(tt_crude_foi, crude_foi, \"constant\")","","M_0[] <- user()","dim(M_0) <- n_maternal","","S_0[] <- user()","dim(S_0) <- n_age","","R_0[] <- user()","dim(R_0) <- n_age","","V_0[] <- user()","dim(V_0) <- n_age","","VD_0[] <- user()","dim(VD_0) <- n_age","","","#transitions","total_pop[1:n_maternal] <- R[i] + S[i] + V[i] + M[i] + VD[i]","total_pop[(n_maternal + 1):n_age] <- R[i] + S[i] + V[i] + VD[i]","dim(total_pop) <- n_age","","total_child_bearing[] <- total_pop[i] * child_bearing[i]","dim(total_child_bearing) <- n_age","","susceptible_pop[] <- S[i] + VD[i]","dim(susceptible_pop) <- n_age","","susceptible_child_bearing[] <- (susceptible_pop[i]) * child_bearing[i]","dim(susceptible_child_bearing) <- n_age","","births_total <- (sum(total_pop[])) * t_crude_birth_rate","","births_S <- births_total * (sum(susceptible_child_bearing[]) / sum(total_child_bearing[]))","","births_M <- births_total - births_S","","#adjust death rate so that it matches crude rate","weighted_totals[] <- prop_death[i] * total_pop[i]","dim(weighted_totals) <- n_age","","t_death_rate[] <- min(t_crude_death_rate * prop_death[i] * sum(total_pop[]) / sum(weighted_totals[]), 1)","dim(t_death_rate) <- n_age","","births_deaths_S[1] <- births_S - t_death_rate[i] * S[i]","births_deaths_S[2:n_age] <- -t_death_rate[i] * S[i]","dim(births_deaths_S) <- n_age","","births_deaths_R[] <- -t_death_rate[i] * R[i]","dim(births_deaths_R) <- n_age","","births_deaths_V[] <- -t_death_rate[i] * V[i]","dim(births_deaths_V) <- n_age","","births_deaths_VD[] <- -t_death_rate[i] * VD[i]","dim(births_deaths_VD) <- n_age","","births_deaths_M[1] <- births_M - t_death_rate[i] * M[i]","births_deaths_M[2:n_maternal] <- - t_death_rate[i] * M[i]","dim(births_deaths_M) <- n_maternal","","#waning","waning_R[] <- waning * R[i]","dim(waning_R) <- n_age","","waning_V[] <- waning * V[i]","dim(waning_V) <- n_age","","waning_VD[] <- waning * VD[i]","dim(waning_VD) <- n_age","","loses_immunity[] <- waning_R[i] + waning_V[i] + waning_VD[i]","dim(loses_immunity) <- n_age","","#must adjust crude foi for the fact that some people are immune","","#this can't go over 1 else the mathematics breaks, also crude_foi can't be greater than S/N at any point else this limit is met.","t_adjusted_foi <- if (adjust_for_crude_foi) min(t_crude_foi * sum(total_pop[]) / sum(susceptible_pop[]), 1) else t_crude_foi","","infections_S[] <- t_adjusted_foi * S[i]","dim(infections_S) <- n_age","","infections_VD[] <- t_adjusted_foi * VD[i]","dim(infections_VD) <- n_age","","gains_immunity[] <- infections_S[i] + infections_VD[i]","dim(gains_immunity) <- n_age","","#ageing and vaccinations happen externally","","#derivatives","dim(S) <- n_age","initial(S[]) <- S_0[i]","deriv(S[]) <- births_deaths_S[i] + loses_immunity[i] - infections_S[i]","","dim(R) <- n_age","initial(R[]) <- R_0[i]","deriv(R[]) <- births_deaths_R[i] + gains_immunity[i] - waning_R[i]","","dim(V) <- n_age","initial(V[]) <- V_0[i]","deriv(V[]) <- births_deaths_V[i] - waning_V[i]","","dim(VD) <- n_age","initial(VD[]) <- VD_0[i]","deriv(VD[]) <- births_deaths_VD[i] - waning_VD[i] - infections_VD[i]","","dim(M) <- n_maternal","initial(M[]) <- M_0[i]","deriv(M[]) <- births_deaths_M[i]"]}
